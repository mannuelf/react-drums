---
name: Client
---

# Client

React-drums Machine is a SPA built using `create-react-app` tool-chain along with my added extras.

It is housed in a monorepo and is using Yarn workspaces, all yarn commands to be executed from the root of project using the root `package.json` as an entry point.

## Getting started

First install all the Node.js dependencies.

```bash
yarn install
```

## Local development

### Step 1: Run migrations

```bash
yarn migrate
```

### Step 2: Start servers

yarn dev will start all the services.

- [React](https://reactjs.org) SPA
- [Apollo Server](https://github.com/apollographql/apollo-server)
- [Prisma Studio](https://www.prisma.io/studio) (database visualizing tool, nice way to see your tables thanks [Prisma](https://www.prisma.io))

```bash
yarn dev
```

## All Available commands

```json
"scripts": {
    "build:client": "yarn --cwd client build:client",
    "dev:client": "yarn --cwd client start",
    "dev:server": "yarn --cwd server dev",
    "dev": "concurrently \"yarn dev:server\"   \"yarn dev:client\"  \"yarn studio\" \"yarn docz:dev\" ",
    "docz:build": "yarn --cwd documentation docz:build",
    "docz:dev": "yarn --cwd documentation docz:dev",
    "docz:serve": "yarn --cwd documentation docz:serve",
    "migrate": "yarn --cwd server prisma:migrate",
    "prisma:generate": "yarn --cwd server prisma generate",
    "server": "yarn --cwd server start",
    "start": "concurrently \"yarn docz:serve\" \"yarn server\" \"yarn build:client\" ",
    "studio": "yarn --cwd server prisma:studio",
    "test:client": "yarn --cwd client test",
    "test:server": "yarn --cwd server test"
  },
```

## Index

The `index.ts` file is the entry point, this setups up the Redux provider and Apollo Provider and imports the App component.

```jsx
import * as dotenv from 'dotenv';
import * as serviceWorker from './serviceWorker';
import LogRocket from 'logrocket';
import ReactGa from 'react-ga';
import { Provider } from 'react-redux';
import {
  ApolloProvider,
  ApolloClient,
  createHttpLink,
  InMemoryCache,
} from '@apollo/client';
import { setContext } from '@apollo/client/link/context';
import App from './components/app/App';
import isProduction from './utils/isProduction';
import { API_URL, AUTH_JWT } from './constants';
import { store } from './store/store';
```

```jsx
<React.StrictMode>
  <Provider store={store}>
    <ApolloProvider client={client}>
      <App />
    </ApolloProvider>
  </Provider>
</React.StrictMode>
```

## App

The App component is responsible for setting up the app environment by importing required components, includes a [Router](https://reactrouter.com) and GlobalStyle object.

```jsx
import { BrowserRouter as Router, Switch, Route } from 'react-router-dom';
import Footer from '../footer/Footer';
import GlobalStyle from '../../styles/global-styles';
import LoginForm from '../../features/login/LoginForm';
import Machine from '../../features/machine/Machine';
```

```jsx
<Router>
  <GlobalStyle />
  <Switch>
    <Route exact path='/' component={Machine} />
    <Route exact path='/login' component={LoginForm} />
  </Switch>
  <Footer />
</Router>
```
